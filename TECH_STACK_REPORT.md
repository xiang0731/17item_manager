# 17ItemManager 技术栈报告

> 基于项目当前代码状态整理（`index.php` + `README.md`）。  
> 版本：v1.5.0  
> 生成时间：2026-02-16

## 1. 项目定位

- 形态：单文件 PHP Web 应用（前后端一体）
- 目标：家庭/个人物品管理 + 购物清单 + 提醒 + 公共频道共享 + 用户隔离
- 部署方式：零构建、零包管理器依赖，直接部署到支持 PHP 的 Web 环境

## 2. 核心技术栈

### 2.1 后端

- 语言：PHP
- 数据访问：PDO
- 接口组织：REST 风格（`?api=xxx` 路由分发）
- 会话机制：PHP Session（登录态存储）
- 密码安全：`password_hash` / `password_verify`

### 2.2 数据库

- 引擎：SQLite
- 结构：
  - 认证库：`data/auth_db.sqlite`
  - 业务库：`data/items_db.sqlite`（管理员默认库）+ `data/items_db_u{ID}.sqlite`（用户隔离）
- 事务与一致性：
  - `PRAGMA journal_mode=WAL`
  - `PRAGMA foreign_keys=ON`
- 数据模型覆盖：
  - 用户与权限
  - 物品、分类、位置
  - 购物清单
  - 循环提醒实例
  - 公共频道共享物品
  - 公共频道评论
  - 回收站软删除

### 2.3 前端

- UI 框架：Tailwind CSS（CDN）
- 图标：RemixIcon（CDN）
- 脚本：Vanilla JavaScript（无框架）
- 网络层：`fetch` + JSON
- 状态持久化：`localStorage`（主题、排序、视图偏好、字段显示等）

## 3. 架构特征

### 3.1 架构模式

- 单体应用（Monolith）
- 前后端同文件维护（`index.php`）
- 无独立构建流程、无前后端分仓

### 3.2 API 与视图关系

- 服务端负责：
  - API 路由
  - 数据读写与迁移
  - 登录/权限校验
- 客户端负责：
  - 视图切换与渲染
  - 表单交互、筛选排序
  - 调用 API 并展示结果

## 4. 安全与权限实现

- 认证：
  - 登录/注册/退出
  - 验证问题找回密码
  - Demo 一键登录
- 授权：
  - `admin` 与普通用户角色区分
  - 用户管理能力仅管理员可访问（如重置密码）
  - 公共频道评论删除权限：仅评论者本人或管理员可删除
- 数据隔离：
  - 按用户 ID 路由到独立 SQLite 文件，隔离业务数据

## 5. 文件与运行时依赖

- 关键文件：
  - `index.php`：主应用（API + HTML + CSS + JS）
  - `README.md`：产品说明
  - `IMPLEMENTATION_DETAILS.md`：实现细节
- 运行时目录：
  - `data/`（数据库、上传文件、回收站文件）
- 外部依赖来源：
  - Tailwind CDN
  - RemixIcon CDN

## 6. 可运维性评估

### 优势

- 部署成本低，适合 NAS / 轻量服务器
- SQLite + 单文件应用，迁移与备份简单
- 功能面较完整，覆盖物品管理完整闭环

### 风险与边界

- 单文件规模较大，维护复杂度上升
- 前后端耦合高，协作分工难度较大
- CDN 依赖在离线/内网场景可能受限
- SQLite 适合中低并发场景，不适合高并发写入

## 7. 适用场景结论

该项目技术栈非常适合：

- 个人或小团队内部工具
- NAS（如 Synology）自托管应用
- 低并发、快速迭代、重功能落地的业务场景

若未来目标转向多人高并发或复杂协作开发，建议演进为：

- 前后端分层（API 服务 + 前端工程）
- 模块化拆分（认证、物品、清单、提醒）
- 引入 CI、测试与静态检查流程
